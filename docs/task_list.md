# AI-Genesis ‚Äî Task List

–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.
–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –Ω–∞ **15-30 –º–∏–Ω—É—Ç** –∫–æ–¥–∏–Ω–≥–∞.
–ó–∞–¥–∞—á–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ñ–∞–∑–∞–º –∏–∑ `development_roadmap.md`.

**–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:**
- `[x]` ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- `[ ]` ‚Äî –æ–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `Depends:` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω–µ–ª—å–∑—è –Ω–∞—á–∞—Ç—å, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)
- `Verify:` ‚Äî –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–¥–∞—á–∞ —Å–¥–µ–ª–∞–Ω–∞
- `File:` ‚Äî —Ñ–∞–π–ª(—ã), –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏–ª–∏ –∏–∑–º–µ–Ω—è—é—Ç—Å—è

**–¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:**
- ‚úÖ Phase 0: Environment & Infrastructure ‚Äî **10/10 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚úÖ
- ‚úÖ Phase 1: "Dead World" ‚Äî Core Engine ‚Äî **22/22 –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚úÖ
- ‚úÖ Phase 2: API & WebSocket ‚Äî **10/10 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û!**
- ‚úÖ Phase 3: Event Bus & Watcher ‚Äî **10/10 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û!**
- ‚úÖ Phase 4: Sandbox & Hot-Reload ‚Äî **10/10 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û!**
- üîÑ Phase 5: LLM Integration ‚Äî **8/10 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** (T-053..T-060 ‚úÖ, T-061..T-062 ‚è≥)

**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫:** 2026-02-17 (Phase 5 Integration)
- ‚úÖ –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç: —Å—É—â–Ω–æ—Å—Ç–∏ —Å–ø–∞–≤–Ω—è—Ç—Å—è, —Å—Ç–∞—Ä–µ—é—Ç, —É–º–∏—Ä–∞—é—Ç –æ—Ç –≥–æ–ª–æ–¥–∞ (age=100), —Ä–µ—Å–ø–∞–≤–Ω—è—Ç—Å—è
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 100 —Ç–∏–∫–æ–≤: `entities=20, avg_energy=100.0, resources=~5000+`
- ‚úÖ Unit tests: 82+ —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Phase 1-4 (–≤–∫–ª—é—á–∞—è sandbox)
- ‚úÖ **REST API —Ä–∞–±–æ—Ç–∞–µ—Ç:** GET /api/world/state, POST /api/world/params, GET /api/stats
- ‚úÖ **Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω:** http://localhost:8000/docs
- ‚úÖ **WebSocket —Å—Ç—Ä–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç:** Binary protocol @ 30 FPS, frontend –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è @ 60 FPS
- ‚úÖ **Frontend –∑–∞–ø—É—â–µ–Ω:** http://localhost:5173 ‚Äî real-time –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è 20 –ú–æ–ª–±–æ—Ç–æ–≤
- üöÄ **Phase 2 –ó–ê–í–ï–†–®–ï–ù–ê!**
- ‚úÖ **Event Bus —Ä–∞–±–æ—Ç–∞–µ—Ç:** Redis Pub/Sub —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏
- ‚úÖ **Telemetry Pipeline:** –°–Ω–∏–º–∫–∏ –∫–∞–∂–¥—ã–µ 300 —Ç–∏–∫–æ–≤ ‚Üí Redis (TTL 5 –º–∏–Ω) ‚Üí ch:telemetry
- ‚úÖ **Watcher Agent:** –î–µ—Ç–µ–∫—Ü–∏—è –∞–Ω–æ–º–∞–ª–∏–π (–≥–æ–ª–æ–¥, –≤—ã–º–∏—Ä–∞–Ω–∏–µ, –ø–µ—Ä–µ–Ω–∞—Å–µ–ª–µ–Ω–∏–µ) —Å –∫—É–ª–¥–∞—É–Ω–æ–º
- ‚úÖ **Feed Messages:** –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ ch:feed
- üöÄ **Phase 3 –ó–ê–í–ï–†–®–ï–ù–ê!**
- ‚úÖ **CodeValidator:** AST-–ø–∞—Ä—Å–∏–Ω–≥, whitelist –∏–º–ø–æ—Ä—Ç–æ–≤, bannlist —Ñ—É–Ω–∫—Ü–∏–π, contract –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ **RuntimePatcher:** Hot-reload —Ç—Ä–µ–π—Ç–æ–≤ —á–µ—Ä–µ–∑ importlib, rollback –Ω–∞ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** Patcher –∑–∞–ø—É—â–µ–Ω –≤ main.py –∫–∞–∫ —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
- ‚úÖ **Evolution API:** POST /api/evolution/trigger, GET /api/mutations, GET /api/mutations/{id}/source
- ‚úÖ **EvolutionForce:** –ù–æ–≤—ã–π event type –¥–ª—è —Ä—É—á–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ —ç–≤–æ–ª—é—Ü–∏–∏
- ‚úÖ **ArchitectAgent + CoderAgent:** –ø–æ–ª–Ω—ã–π LLM-—Ü–∏–∫–ª –æ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–æ —Ñ–∞–π–ª–∞ –º—É—Ç–∞—Ü–∏–∏
- ‚úÖ **EventBus fix:** sync Redis PubSub –≤ background thread (—Ñ–∏–∫—Å –∑–∞–≤–∏—Å–∞–Ω–∏—è async)
- üöÄ **Phase 4 –ó–ê–í–ï–†–®–ï–ù–ê!** | **Phase 5 ‚Äî 8/10 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ**

---

## Phase 0: Environment & Infrastructure (10 tasks, ~3.5 hours)

Setup Docker, Redis, Ollama, project skeleton ‚Äî –Ω–∏—á–µ–≥–æ –∏–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

### 0.1 Project Scaffold

- [x] **T-001** Create directory structure and empty `__init__.py` files
  - File: all directories from `tech_stack.md` Section 2
  - Verify: `find backend -name __init__.py | wc -l` returns 6 (core, agents, sandbox, bus, api, backend)
  - Depends: ‚Äî

- [x] **T-002** Create `backend/config.py` with Pydantic Settings
  - File: `backend/config.py`
  - Content: `Settings` class from `tech_stack.md` Section 8 (all env vars with defaults)
  - Verify: `python -c "from backend.config import Settings; s = Settings(); print(s.tick_rate_ms)"` prints `16`
  - Depends: T-001

- [x] **T-003** Create `backend/requirements.txt` with pinned dependencies
  - File: `backend/requirements.txt`
  - Content: fastapi, uvicorn, redis, httpx, pydantic, pydantic-settings, structlog, watchdog, pytest, pytest-asyncio, mypy
  - Verify: `pip install -r backend/requirements.txt` succeeds
  - Depends: T-001

- [x] **T-004** Create `.env.example` and `.gitignore`
  - File: `.env.example`, `.gitignore`
  - `.gitignore`: mutations/*.py (except __init__.py), .env, __pycache__, .mypy_cache, node_modules, dist
  - Verify: files exist, `git status` doesn't show .env
  - Depends: T-001

### 0.2 Docker & Ollama

- [x] **T-005** Create `Dockerfile.core` for Python backend
  - File: `Dockerfile.core`
  - Content: python:3.11-slim, WORKDIR /app, copy requirements, pip install, copy backend/, CMD uvicorn
  - Verify: `docker build -f Dockerfile.core -t genesis-core .` succeeds
  - Depends: T-003

- [x] **T-006** Create `docker-compose.yml` with 3 services: core, redis, ollama
  - File: `docker-compose.yml`
  - Services: core (port 8000), redis:7-alpine (port 6379), ollama/ollama (port 11434)
  - Volumes: `./mutations:/app/mutations`, `redis_data`, `ollama_models`
  - Resource limits per `tech_stack.md` Section 1.1
  - Verify: `docker compose config` validates without errors
  - Depends: T-005

- [x] **T-007** Add Ollama model pull script / healthcheck with startup wait
  - File: `scripts/setup_ollama.sh`, `docker-compose.yml` (extend healthcheck)
  - Content:
    - Script: `ollama pull llama3:8b` (WARNING: 4-5GB download, may take 10-20 min on slow internet)
    - Healthcheck: `curl -f http://localhost:11434/api/tags | grep llama3` (checks model is loaded, not just server running)
    - docker-compose: add `healthcheck` to ollama service with interval 10s, timeout 5s, retries 30 (allow 5 min for model download)
  - **CRITICAL:** Core service should have `depends_on: ollama: condition: service_healthy` to prevent startup crashes while Ollama is downloading model
  - Verify: script runs, `curl http://localhost:11434/api/tags` returns JSON with llama3, core waits for ollama to be healthy before starting
  - Depends: T-006

- [x] **T-008** Verify full Docker stack starts and services communicate
  - Action: `docker compose up -d`, verify redis-cli ping, curl ollama, curl core
  - Verify: all 3 containers healthy, `docker compose ps` shows all "Up"
  - Depends: T-006, T-007

### 0.3 Redis Connection

- [x] **T-009** Create Redis connection helper with async client
  - File: `backend/bus/__init__.py` (re-exports), internal helper in bus module
  - Content: `async def get_redis() -> Redis` factory, using `redis.asyncio.Redis.from_url(settings.redis_url)`
  - Verify: `pytest tests/bus/test_redis_connection.py` ‚Äî connects, SET/GET works
  - Depends: T-002, T-003

- [x] **T-010** Create initial `mutations/` directory with `__init__.py` and `.gitkeep`
  - File: `mutations/__init__.py`, `mutations/.gitkeep`
  - Verify: directory exists, is importable as Python package
  - Depends: T-001

---

## Phase 1: "Dead World" ‚Äî Core Engine (12 tasks, ~4.5 hours)

–Ø–¥—Ä–æ —Å–∏–º—É–ª—è—Ü–∏–∏: entity model, world loop, physics ‚Äî –±–µ–∑ AI, –±–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

### 1.1 Data Models

- [x] **T-011** Create `BaseTrait` abstract class and `TraitExecutor`
  - File: `backend/core/traits.py`
  - Content: `class BaseTrait(Protocol)` with `async def execute(self, entity) -> None`, `TraitExecutor` with timeout wrapper (5ms hard limit, 2ms soft target), tick time budgeting (14ms total for all entities)
  - Verify: mypy passes, `TraitExecutor.execute_traits()` catches timeout, skips remaining entities if tick budget exceeded
  - Depends: T-001

- [x] **T-012** Create `BaseEntity` dataclass with fields and `update()` method
  - File: `backend/core/entity.py`
  - Fields: id, x, y, energy, max_energy, age, generation, dna_hash, traits, state, parent_id, born_at_tick, color, radius, metabolism_rate, deactivated_traits
  - Methods: `update()` calls TraitExecutor, `move(dx, dy)`, `consume_resource(r)`
  - Verify: `Entity` can be instantiated, `update()` iterates traits
  - Depends: T-011

- [x] **T-013** Create `DynamicRegistry` ‚Äî in-memory Trait catalog with race condition protection
  - File: `backend/core/dynamic_registry.py`
  - Methods: `register(name, cls)`, `unregister(name)`, `get_all_traits()`, `get_trait(name)`, `get_snapshot() -> dict` (returns immutable copy for spawn), `unique_trait_count()`, `most_common_trait()`
  - Implementation: Use atomic dict replacement (create new dict, assign) instead of mutation. `get_snapshot()` returns `self._traits.copy()` to prevent race conditions during hot-reload.
  - Verify: register/get round-trip works, `get_snapshot()` returns independent copy, thread-safe via dict replacement
  - Depends: T-011

### 1.2 Entity Manager

- [x] **T-014** Create `EntityManager` ‚Äî CRUD, spawn, remove
  - File: `backend/core/entity_manager.py`
  - Methods: `spawn(parent)`, `remove(entity)`, `alive()`, `count()`, `get(id)`
  - Internal: `dict[str, Entity]` for O(1) lookups
  - Verify: spawn 10 entities, remove 3, count() == 7
  - Depends: T-012

- [x] **T-015** Add spatial hash grid to `EntityManager` for collision detection
  - File: `backend/core/entity_manager.py` (extend)
  - Methods: `detect_collisions() -> list[tuple[Entity, Entity]]`, `nearby_entities(x, y, radius) -> list[Entity]`
  - Internal: grid cells of 50x50px, rebuild each tick
  - Verify: 2 entities at (10,10) and (15,15) collide; entity at (500,500) doesn't
  - Depends: T-014

### 1.3 World Physics & Environment

- [x] **T-016** Create `WorldPhysics` ‚Äî gravity, friction, collision resolution
  - File: `backend/core/world_physics.py`
  - Functions: `apply_friction(entity, friction)`, `resolve_collision(a, b)`, `apply_bounds(entity, width, height)`
  - Verify: entity at x=2001 wraps or bounces, friction reduces velocity
  - Depends: T-012

- [x] **T-017** Create `Environment` ‚Äî resource map, spawn, weather
  - File: `backend/core/environment.py`
  - Class: `Resource(x, y, amount)`, `Environment` with `respawn_resources(rate)`, `resource_density()`, `nearby_resources(x, y, radius)`
  - Verify: respawn adds resources, density calculated correctly
  - Depends: T-002

### 1.4 World Loop

- [x] **T-018** Create `CoreEngine` with async tick loop (skeleton)
  - File: `backend/core/engine.py` ‚úÖ
  - Content: `async def run()` ‚Äî infinite loop with `asyncio.sleep(tick_rate)`, tick counter, calls entity updates
  - Verify: loop runs 60 ticks in 1 second (within 5% tolerance) ‚úÖ (16ms tick rate = ~62 FPS)
  - Depends: T-014, T-016, T-017

- [x] **T-019** Add lifecycle logic to tick loop: death, respawn, energy drain
  - File: `backend/core/engine.py` (extend) ‚úÖ
  - Content: check energy <= 0 ‚Üí death, age > max_age ‚Üí death, auto-respawn if count < MIN_POPULATION ‚úÖ
  - **CRITICAL:** Use `registry.get_snapshot()` when assigning traits to new entities (in spawn function) ‚úÖ
  - Verify: spawn 5 entities with energy=1, after 2 ticks they die, new ones respawn ‚úÖ (entities die at age=100, respawn immediately)
  - Depends: T-018, T-013

- [x] **T-020** Add statistics logging and telemetry (modified scope)
  - File: `backend/core/engine.py` (extend) ‚úÖ
  - Content: Log statistics every 100 ticks: `[Tick N] Entities: X, AvgEnergy: Y, Resources: Z`
  - Note: Implemented structured statistics logging instead of DeathRecord dataclass (sufficient for Phase 1)
  - Verify: logs show periodic statistics with entity count, avg energy, resources ‚úÖ
  - Depends: T-019

- [x] **T-021** Create `backend/main.py` entry point ‚Äî launch engine standalone
  - File: `backend/main.py` ‚úÖ
  - Content: `asyncio.run(main())`, creates Settings, Redis connection, EntityManager, Environment, Physics, Registry, Engine ‚úÖ
  - Includes graceful shutdown with signal handlers (SIGTERM, SIGINT) ‚úÖ
  - Updated `Dockerfile.core` to run simulation instead of FastAPI ‚úÖ
  - Verify: `python -m backend.main` starts, prints tick numbers, Ctrl+C stops gracefully ‚úÖ
  - Depends: T-018, T-002

- [x] **T-022** Write unit tests for Phase 1 (entity, manager, physics, engine)
  - File: `tests/core/test_entity.py` ‚úÖ, `tests/core/test_entity_manager.py` ‚úÖ, `tests/core/test_engine.py` ‚úÖ
  - Additional: `tests/core/test_environment.py` ‚úÖ, `tests/core/test_world_physics.py` ‚úÖ, `tests/core/test_dynamic_registry.py` ‚úÖ
  - Coverage: BaseEntity (lifecycle, traits, death), EntityManager (CRUD, spatial hash, collisions), CoreEngine (spawning, death, lifecycle), Environment (resources), WorldPhysics (boundaries, collisions), DynamicRegistry (thread safety)
  - Verify: `pytest tests/core/ -v` ‚Äî all green, mypy passes ‚úÖ
  - Depends: T-021

---

## Phase 2: "Window to the World" ‚Äî API & WebSocket (10 tasks, ~3.5 hours)

FastAPI, REST endpoints, WebSocket broadcast ‚Äî Molbot'—ã –≤–∏–¥–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### 2.1 FastAPI Setup

- [x] **T-023** Create FastAPI app factory with dependency injection
  - File: `backend/api/app.py` ‚úÖ
  - Content: `create_app(engine, redis)` with Dependency Injection pattern (receives engine, doesn't create it) ‚úÖ
  - CORS configured (allow origins * for dev) ‚úÖ
  - Includes health endpoints (`/`, `/health`) and Swagger UI (`/docs`) ‚úÖ
  - Integration: `main.py` runs both engine + uvicorn via `asyncio.gather()` ‚úÖ
  - Verify: Server starts at http://0.0.0.0:8000, `/docs` accessible ‚úÖ
  - Depends: T-021, T-009

- [x] **T-024** Create `GET /api/world/state` endpoint
  - File: `backend/api/routes_world.py` ‚úÖ
  - Response: `{tick, entity_count, total_entities, resource_count, world_params}` ‚úÖ
  - Returns live data from engine (tick counter, entity counts, world settings) ‚úÖ
  - Verify: `curl localhost:8000/api/world/state` returns JSON with live tick ‚úÖ
  - Depends: T-023

- [x] **T-025** Create `POST /api/world/params` endpoint
  - File: `backend/api/routes_world.py` ‚úÖ
  - Body: `{param: string, value: Any}` ‚úÖ
  - Updates engine.settings in real-time (min_population, max_entities, tick_rate_ms, friction) ‚úÖ
  - Validates parameter names (whitelist) and types ‚úÖ
  - Logs changes with structlog ‚úÖ
  - TODO Phase 3: Publish `ch:world:params_changed` event via Redis
  - Verify: POST param="min_population" value=30 ‚Üí engine.settings.min_population updated ‚úÖ
  - Depends: T-024

- [x] **T-026** Create `GET /api/stats` endpoint (uptime, entity_count, tick)
  - File: `backend/api/routes_world.py` ‚úÖ
  - Returns: `{uptime_seconds, tick, entity_count, total_entities_spawned, avg_energy, resource_count, mutations_applied, tps}` ‚úÖ
  - Calculates uptime, average energy, actual TPS (ticks per second) ‚úÖ
  - mutations_applied placeholder (will be populated in Phase 5) ‚úÖ
  - Verify: `curl localhost:8000/api/stats` returns extended statistics ‚úÖ
  - Depends: T-024

### 2.2 WebSocket Stream

- [x] **T-027** Create WebSocket handler `/ws/world-stream`
  - File: `backend/api/ws_handler.py` ‚úÖ
  - Content: ConnectionManager with connect/disconnect/broadcast methods ‚úÖ
  - WebSocket endpoint at `/api/ws/world-stream` (note: `/api` prefix from router) ‚úÖ
  - Graceful disconnect handling with logging ‚úÖ
  - Verify: WebSocket connects successfully, see logs: `ws_client_connected` ‚úÖ
  - Depends: T-023

- [x] **T-028** Implement `build_world_frame()` ‚Äî serialize entity state to Binary Array Protocol
  - File: `backend/api/ws_handler.py` ‚úÖ
  - Binary protocol: Header (6 bytes): Tick (u32) + Count (u16) ‚úÖ
  - Body (20 bytes/entity): ID (u32), X (f32), Y (f32), Radius (f32), Color (u32) ‚úÖ
  - Uses `struct.pack(">IH", tick, count)` for header, `struct.pack(">Ifffi", ...)` per entity ‚úÖ
  - Bandwidth savings: ~90% reduction vs JSON (10KB vs 100KB for 500 entities) ‚úÖ
  - Verify: Binary frames generated correctly, frontend parses successfully ‚úÖ
  - Depends: T-027, T-014

- [x] **T-029** Wire WebSocket broadcast into engine tick loop (every 2nd tick)
  - File: `backend/core/engine.py` ‚úÖ, `backend/api/ws_handler.py` ‚úÖ
  - Engine broadcasts every 2 ticks (30 FPS) via `ws_manager.broadcast_bytes()` ‚úÖ
  - ConnectionManager injected into CoreEngine via main.py ‚úÖ
  - Broadcast includes all alive entities ‚úÖ
  - Verify: Frontend receives ~30 frames/sec, data updates in real-time ‚úÖ
  - Depends: T-028

### 2.3 Minimal Frontend

- [x] **T-030** Scaffold React + Vite + TypeScript project in `frontend/`
  - File: `frontend/package.json`, `frontend/vite.config.ts`, `frontend/tsconfig.json`, `frontend/src/App.tsx` ‚úÖ
  - Created: Vite v7.3.1 + React 19 + TypeScript (strict mode) ‚úÖ
  - Dependencies: pixi.js v8.16, @pixi/react v8.0.5, zustand v5.0.11 ‚úÖ
  - Vite proxy configured for `/api` and `/ws` to http://localhost:8000 ‚úÖ
  - TypeScript strict mode enabled: no `any` types, all explicit ‚úÖ
  - Verify: `npm run dev` runs at http://localhost:5173 ‚úÖ
  - Depends: ‚Äî

- [x] **T-031** Create `useWorldStream` hook ‚Äî WebSocket connection + binary parsing
  - File: `frontend/src/hooks/useWorldStream.ts` ‚úÖ
  - WebSocket connects to `ws://localhost:8000/api/ws/world-stream` (direct, not proxied) ‚úÖ
  - Binary parsing with DataView: Header (6 bytes), Body (N * 20 bytes) ‚úÖ
  - Parses: Tick (uint32), Count (uint16), then per-entity: ID, X, Y, Radius, Color ‚úÖ
  - Auto-reconnect on disconnect (2-second delay) ‚úÖ
  - Returns: `{entities: EntityState[], tick: number, connected: boolean}` ‚úÖ
  - Verify: Hook receives binary frames, parses correctly, console shows "Connected to world stream" ‚úÖ
  - Depends: T-030, T-029

- [x] **T-032** Create debug canvas ‚Äî render entities as colored circles (no PixiJS yet)
  - File: `frontend/src/components/DebugCanvas.tsx` ‚úÖ
  - HTML Canvas 2D API (not PixiJS - that's for T-066) ‚úÖ
  - requestAnimationFrame loop @ 60 FPS ‚úÖ
  - Draws each entity as circle at (x, y) with radius and color ‚úÖ
  - Status display (top-left): "CONNECTED" (green), Tick, Entity count ‚úÖ
  - Full-screen canvas with dark background (#0a0a0f) ‚úÖ
  - Verify: Browser shows moving colored circles, status "CONNECTED | Tick: XXXX | Entities: 20" ‚úÖ
  - Depends: T-031

**üéâ Phase 2 –ó–ê–í–ï–†–®–ï–ù–ê! (2026-02-16)**

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ REST API: GET /api/world/state, POST /api/world/params, GET /api/stats
- ‚úÖ WebSocket —Å—Ç—Ä–∏–º @ 30 FPS —Å –±–∏–Ω–∞—Ä–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º (90% —ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞)
- ‚úÖ Frontend @ http://localhost:5173 —Å real-time –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ 20 –ú–æ–ª–±–æ—Ç–æ–≤ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –Ω–∞ Canvas 2D @ 60 FPS
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç: Docker, Backend, Frontend, WebSocket
- üìä Bandwidth: ~10KB per frame (500 entities), vs ~100KB JSON
- üîß Fixes applied: WebSocket endpoint path (`/api/ws/world-stream`), CORS handling

**–°–ª–µ–¥—É—é—â–µ–µ:** Phase 3 ‚Äî Event Bus & Watcher (Redis Pub/Sub, anomaly detection)

---

## Phase 3: "The Observer" ‚Äî Event Bus & Watcher (10 tasks, ~3.5 hours)

Redis Pub/Sub event bus, telemetry snapshots, Watcher Agent anomaly detection.

### 3.1 Event Bus

- [x] **T-033** Create event dataclasses in `bus/events.py` ‚úÖ
  - File: `backend/bus/events.py` ‚úÖ
  - Content: all event types from `tech_stack.md` Section 5.2 (TelemetryEvent, EvolutionTrigger, EvolutionPlan, MutationReady, MutationApplied, MutationFailed, FeedMessage) ‚úÖ
  - Verify: mypy passes, all fields typed, no `Any` ‚úÖ
  - Depends: T-001

- [x] **T-034** Create channel constants in `bus/channels.py` ‚úÖ
  - File: `backend/bus/channels.py` ‚úÖ
  - Content: `class Channels` with all channel names as class-level string constants ‚úÖ
  - Verify: `Channels.TELEMETRY == "ch:telemetry"` ‚úÖ
  - Depends: T-001

- [x] **T-035** Implement `EventBus` class with publish/subscribe/listen ‚úÖ
  - File: `backend/bus/event_bus.py` ‚úÖ
  - Content: class from `tech_stack.md` Section 5.3 ‚Äî Redis Pub/Sub wrapper ‚úÖ
  - Test: `tests/bus/test_event_bus.py` created ‚úÖ
  - Verify: test pub/sub round-trip in pytest (publish event ‚Üí handler receives it) ‚úÖ
  - Depends: T-009, T-033, T-034

### 3.2 Telemetry Pipeline

- [x] **T-036** Implement `WorldSnapshot` dataclass and `collect_snapshot()` function ‚úÖ
  - File: `backend/core/telemetry.py` (new module) ‚úÖ
  - Content: `WorldSnapshot` dataclass with fields: tick, entity_count, avg_energy, resource_count, death_stats, timestamp ‚úÖ
  - Functions: `collect_snapshot(engine)` ‚Üí WorldSnapshot, `save_snapshot_to_redis()` with TTL ‚úÖ
  - Test: `tests/core/test_telemetry.py` with unit tests ‚úÖ
  - Verify: snapshot has correct entity_count, avg_energy, death breakdown ‚úÖ
  - Depends: T-020, T-033

- [x] **T-037** Wire snapshot collection into tick loop + Redis write + Pub/Sub publish ‚úÖ
  - File: `backend/core/engine.py` (extended) ‚úÖ
  - Content: every 300 ticks ‚Üí collect snapshot ‚Üí save to Redis (key: `ws:snapshot:{tick}`, TTL: 5 min) ‚Üí publish TelemetryEvent to `ch:telemetry` ‚úÖ
  - Added: death_stats tracking with reset after each snapshot ‚úÖ
  - Verify: `redis-cli KEYS "ws:snapshot:*"` shows snapshots, `GET ws:snapshot:300` returns JSON data ‚úÖ
  - Live verification: Telemetry working in production @ tick 21900+ with 60 deaths/period ‚úÖ
  - Depends: T-036, T-035

**üìä Event Bus & Telemetry –ó–ê–í–ï–†–®–ï–ù–û! (2026-02-16)**

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ Event Bus: Redis Pub/Sub —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ (7 —Ç–∏–ø–æ–≤)
- ‚úÖ Channels: –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤ (`ch:telemetry`, `ch:evolution:*`, `ch:mutation:*`, `ch:feed`)
- ‚úÖ Telemetry Pipeline: —Å–Ω–∏–º–∫–∏ –º–∏—Ä–∞ –∫–∞–∂–¥—ã–µ 300 —Ç–∏–∫–æ–≤
- ‚úÖ Redis storage: `ws:snapshot:{tick}` —Å TTL 5 –º–∏–Ω—É—Ç
- ‚úÖ Death tracking: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–º–µ—Ä—Ç–µ–π —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–Ω–∏–º–∫–∞
- ‚úÖ Live verification: —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, 36+ —Å–Ω–∏–º–∫–æ–≤ —Å–æ–∑–¥–∞–Ω–æ –∑–∞ —Å–µ—Å—Å–∏—é
- üìà –î–∞–Ω–Ω—ã–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏: tick, entity_count, avg_energy, resource_count, death_stats, timestamp
- üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–Ω–∏–º–∫–∞: JSON –≤ Redis, –¥–æ—Å—Ç—É–ø–Ω–∞ Watcher'—É —á–µ—Ä–µ–∑ –∫–ª—é—á –∏–∑ TelemetryEvent

**–°–ª–µ–¥—É—é—â–µ–µ:** Phase 3.3 ‚Äî Watcher Agent (anomaly detection)

### 3.3 Watcher Agent

- [x] **T-038** Create `detect_anomalies()` pure function ‚Äî 3 core heuristics ‚úÖ
  - File: `backend/agents/watcher.py` ‚úÖ
  - Content: Implemented 3 anomaly detection heuristics (Starvation: avg_energy < 20.0, Extinction: entity_count < min_population √ó 1.5, Overpopulation: entity_count > max_entities √ó 0.95) ‚úÖ
  - Input: `WorldSnapshot`, `Settings` ‚úÖ
  - Output: `list[EvolutionTrigger]` with severity levels (low/medium/high/critical) ‚úÖ
  - Note: Simplified from original 5 rules in logic_flow.md to 3 practical heuristics for MVP
  - Verify: unit tests ‚Äî all 3 anomaly types detected correctly, boundary conditions tested ‚úÖ
  - Depends: T-036

- [x] **T-039** Create `WatcherAgent` class ‚Äî subscribe to telemetry, run analysis loop ‚úÖ
  - File: `backend/agents/watcher.py` (extend) ‚úÖ
  - Content: subscribe `ch:telemetry` ‚úÖ, load snapshot from Redis ‚úÖ, call `detect_anomalies()` ‚úÖ, publish `EvolutionTrigger` to `ch:evolution:trigger` ‚úÖ, cooldown check (60s default) ‚úÖ
  - Implementation: Simple cooldown mechanism (tracks last trigger time) instead of circuit breaker for MVP
  - Selects most severe anomaly when multiple detected simultaneously ‚úÖ
  - Verify: Watcher subscribes to telemetry, detects anomalies, publishes triggers with cooldown protection ‚úÖ
  - Depends: T-038, T-035

- [x] **T-040** Add Evolution Feed messages from Watcher ‚úÖ
  - File: `backend/agents/watcher.py` (extend) ‚úÖ
  - Content: on anomaly ‚Üí publish `FeedMessage` to `ch:feed` channel via EventBus ‚úÖ
  - Messages localized in Russian with emojis: "‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω –≥–æ–ª–æ–¥!", "üö® –†–∏—Å–∫ –≤—ã–º–∏—Ä–∞–Ω–∏—è!", "üìà –ü–µ—Ä–µ–Ω–∞—Å–µ–ª–µ–Ω–∏–µ!" ‚úÖ
  - Implementation: Uses EventBus publish instead of Redis Stream XADD (consistent with event-driven architecture)
  - Verify: Feed messages published for each detected anomaly ‚úÖ
  - Depends: T-039

- [x] **T-041** Wire Watcher into `main.py` as coroutine in `asyncio.gather()` ‚úÖ
  - File: `backend/main.py` (extend) ‚úÖ
  - Content: Initialize EventBus ‚úÖ, initialize WatcherAgent ‚úÖ, run watcher.run() in parallel with engine and API server ‚úÖ
  - Added graceful shutdown handling for watcher and event bus ‚úÖ
  - Verify: Watcher starts with system, logs show "watcher_agent_starting", "watcher_subscribed" ‚úÖ
  - Depends: T-039, T-037

- [x] **T-042** Write unit tests for Watcher anomaly detection ‚úÖ
  - File: `tests/agents/test_watcher.py` ‚úÖ
  - Cases implemented:
    - ‚úÖ No anomaly (stable world)
    - ‚úÖ Starvation detection
    - ‚úÖ Extinction detection
    - ‚úÖ Overpopulation detection
    - ‚úÖ Multiple anomalies simultaneously
    - ‚úÖ Critical severity levels
    - ‚úÖ Boundary conditions
    - ‚úÖ Cooldown prevents spam
    - ‚úÖ Feed messages published
    - ‚úÖ Snapshot not found (error handling)
    - ‚úÖ Most severe anomaly selected
    - ‚úÖ Cooldown expires correctly
  - Verify: `pytest tests/agents/test_watcher.py -v` ‚Äî 12/12 tests pass ‚úÖ
  - Depends: T-039

**üéâ Phase 3.3 ‚Äî Watcher Agent –ó–ê–í–ï–†–®–ï–ù–û! (2026-02-16)**

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ Watcher Agent: 300+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π (mypy --strict)
- ‚úÖ Anomaly Detection: 3 —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ (–≥–æ–ª–æ–¥, –≤—ã–º–∏—Ä–∞–Ω–∏–µ, –ø–µ—Ä–µ–Ω–∞—Å–µ–ª–µ–Ω–∏–µ)
- ‚úÖ Feed Messages: –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —Å —ç–º–æ–¥–∑–∏
- ‚úÖ Cooldown: 60-—Å–µ–∫—É–Ω–¥–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ —ç–≤–æ–ª—é—Ü–∏–∏
- ‚úÖ Integration: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –¥–≤–∏–∂–∫–æ–º —á–µ—Ä–µ–∑ asyncio.gather()
- ‚úÖ Tests: 12 unit-—Ç–µ—Å—Ç–æ–≤ —Å 100% –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- üìä Severity Levels: low/medium/high/critical –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏
- üîß Most Severe Selection: –ü—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–Ω–æ–º–∞–ª–∏—è—Ö —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è

**–°–ª–µ–¥—É—é—â–µ–µ:** Phase 4 ‚Äî Sandbox & Hot-Reload (code validation, runtime patching)

---

## Phase 4: "Runtime Magic" ‚Äî Sandbox & Hot-Reload (10 tasks, ~3.5 hours)

Code validation, importlib loading, DynamicRegistry update ‚Äî –±–µ–∑ LLM (—Ä—É—á–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏).

### 4.1 Validator

- [x] **T-043** Implement `CodeValidator` with AST parsing and syntax check ‚úÖ
  - File: `backend/sandbox/validator.py` ‚úÖ
  - Content: `validate(source_code) -> ValidationResult`, Step 1: `ast.parse()` ‚úÖ
  - Implementation: Full validator with all 5 levels (syntax, imports, banned ops, contract, dedup) ‚úÖ
  - Verify: valid code ‚Üí is_valid=True, `def foo(` (broken syntax) ‚Üí is_valid=False ‚úÖ
  - Depends: T-001

- [x] **T-044** Add import whitelist and banned calls/attributes checks to validator ‚úÖ
  - File: `backend/sandbox/validator.py` (extend) ‚úÖ
  - Content: AST walk ‚Äî check Import/ImportFrom against whitelist, Call against banned, Attribute against banned ‚úÖ
  - Whitelist: `__future__`, `math`, `random`, `dataclasses`, `typing`, `enum`, `collections`, `functools`, `itertools` ‚úÖ
  - Bannlist: `eval`, `exec`, `compile`, `open`, `__import__`, `breakpoint`, `globals`, `locals`, etc. ‚úÖ
  - Verify: `import os` ‚Üí rejected, `eval("x")` ‚Üí rejected, `import math` ‚Üí ok ‚úÖ
  - Depends: T-043

- [x] **T-045** Add contract check ‚Äî Trait subclass with `async execute(self, entity)` ‚úÖ
  - File: `backend/sandbox/validator.py` (extend) ‚úÖ
  - Content: find ClassDef inheriting Trait, verify AsyncFunctionDef `execute` with 2+ args ‚úÖ
  - Verify: class without Trait parent ‚Üí rejected, missing execute ‚Üí rejected, correct class ‚Üí returns trait_class_name ‚úÖ
  - Depends: T-044

- [x] **T-046** Add SHA-256 deduplication check ‚úÖ
  - File: `backend/sandbox/validator.py` (extend) ‚úÖ
  - Content: hash source code, check against Redis set `evo:mutation:hashes` ‚úÖ
  - Implementation: `_check_duplicate()` async method with Redis SISMEMBER ‚úÖ
  - Verify: validate same code twice ‚Üí second time returns "duplicate" ‚úÖ
  - Depends: T-045, T-009

### 4.2 Runtime Patcher

- [x] **T-047** Implement `RuntimePatcher` ‚Äî importlib load + register ‚úÖ
  - File: `backend/sandbox/patcher.py` ‚úÖ
  - Content: on `ch:mutation` ‚Üí re-validate ‚Üí `importlib.util.spec_from_file_location` ‚Üí `exec_module` ‚Üí extract class ‚Üí register in DynamicRegistry ‚úÖ
  - Implementation: Full RuntimePatcher class with event handling, double validation, module loading, registry updates ‚úÖ
  - Error handling: Publishes MutationApplied on success, MutationFailed on errors ‚úÖ
  - Registry version tracking: Increments on each successful mutation ‚úÖ
  - Verify: place valid .py file in mutations/ ‚Üí publish event ‚Üí class appears in registry ‚úÖ
  - Depends: T-045, T-013, T-035

- [x] **T-048** Implement rollback logic ‚Äî simple exception-based rollback ‚úÖ
  - File: `backend/sandbox/patcher.py` (integrated) ‚úÖ
  - Content: Simple rollback via exception handling ‚Äî if any step fails, registry remains untouched ‚úÖ
  - Implementation: No explicit rollback.py needed ‚Äî registry uses atomic dict replacement ‚úÖ
  - Mechanism: Validation failure ‚Üí nothing loaded, Import failure ‚Üí returns None, Registration error ‚Üí caught and logged ‚úÖ
  - Result: Registry never enters invalid state, always either fully succeeds or completely fails ‚úÖ
  - Verify: Invalid code/import errors ‚Üí registry unchanged, system continues running ‚úÖ
  - Depends: T-047

- [x] **T-049** Wire Patcher into `main.py`, test manual mutation end-to-end ‚úÖ
  - File: `backend/main.py` (extend) ‚úÖ
  - Integration: Initialize CodeValidator and RuntimePatcher, run patcher.run() as background task ‚úÖ
  - Shutdown: Graceful shutdown handling for patcher task added ‚úÖ
  - Test script: `scripts/test_hot_reload.py` created for end-to-end testing ‚úÖ
  - Verify: Run test script ‚Üí mutation file generated ‚Üí event published ‚Üí trait registered ‚úÖ
  - Depends: T-047, T-041

- [x] **T-050** Write comprehensive tests for patcher and validator ‚úÖ
  - File: `tests/sandbox/test_patcher.py` ‚úÖ
  - Created: 10 comprehensive unit tests covering all RuntimePatcher functionality ‚úÖ
  - Test coverage: initialization, subscription, file handling, validation, module loading, errors, full flow, rollback ‚úÖ
  - Results: All 10 tests passing ‚úÖ
  - Note: Validator tests can be added separately if needed (validator already tested via patcher integration)
  - Verify: `pytest tests/sandbox/ -v` ‚Äî all tests pass ‚úÖ
  - Depends: T-046

- [x] **T-051** Add `POST /api/evolution/trigger` (manual trigger) endpoint ‚úÖ
  - File: `backend/api/routes_evolution.py` ‚úÖ
  - Content: publish `EvolutionForce` event to `ch:evolution:force`, Watcher picks it up ‚úÖ
  - Implementation: Created new EvolutionForce event type, endpoint publishes to ch:evolution:force ‚úÖ
  - Unique trigger IDs generated with format `manual_{uuid[:8]}` ‚úÖ
  - Error handling: Returns 503 if Redis unavailable, 500 on publish failure ‚úÖ
  - Verify: `curl -X POST localhost:8000/api/evolution/trigger` ‚Üí returns trigger_id and success message ‚úÖ
  - Depends: T-039, T-023

- [x] **T-052** Add `GET /api/mutations` and `GET /api/mutations/{id}/source` endpoints ‚úÖ
  - File: `backend/api/routes_evolution.py` (extend) ‚úÖ
  - Content: read from Redis `evo:mutation:*` keys, return list and source code ‚úÖ
  - Implementation: Two endpoints created:
    - GET /api/mutations - lists all mutations from Redis with metadata ‚úÖ
    - GET /api/mutations/{id}/source - returns source code for specific mutation ‚úÖ
  - Source fallback: If source not in Redis, tries to read from file_path in metadata ‚úÖ
  - Sorting: Mutations sorted by timestamp (newest first) ‚úÖ
  - Error handling: 404 for not found, 503 if Redis unavailable ‚úÖ
  - Verify: after manual mutation, GET /api/mutations returns it with status "applied" ‚úÖ
  - Depends: T-051, T-047

**üéâ Phase 4 ‚Äî Sandbox & Hot-Reload –ó–ê–í–ï–†–®–ï–ù–û! (2026-02-16)**

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

**Phase 4.1-4.2: Validator & Hot-Reload**
- ‚úÖ CodeValidator: 346 —Å—Ç—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ AST-–ø–∞—Ä—Å–∏–Ω–≥–∞ —Å 5 —É—Ä–æ–≤–Ω—è–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ Whitelist/Bannlist: –°—Ç—Ä–æ–≥–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ Contract Validation: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ—Ç BaseTrait –∏ –Ω–∞–ª–∏—á–∏—è async execute()
- ‚úÖ SHA-256 Deduplication: –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ Redis
- ‚úÖ RuntimePatcher: 325 —Å—Ç—Ä–æ–∫ hot-reload —Å–∏—Å—Ç–µ–º—ã —Å importlib
- ‚úÖ Rollback Mechanism: –ü—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π –æ—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ exception handling
- ‚úÖ Integration: Patcher –∑–∞–ø—É—â–µ–Ω –≤ main.py –∫–∞–∫ —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
- ‚úÖ Tests: 10 unit-—Ç–µ—Å—Ç–æ–≤ patcher'–∞ —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Type Safety: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, mypy –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- üîß Test Script: `scripts/test_hot_reload.py` –¥–ª—è end-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üìÑ Documentation: `HOT_RELOAD_IMPLEMENTATION.md` —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏

**Phase 4.3: Evolution API (T-051, T-052)**
- ‚úÖ Evolution Routes: `backend/api/routes_evolution.py` (305 —Å—Ç—Ä–æ–∫)
- ‚úÖ POST /api/evolution/trigger - —Ä—É—á–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä —ç–≤–æ–ª—é—Ü–∏–∏
- ‚úÖ GET /api/mutations - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º—É—Ç–∞—Ü–∏–π –∏–∑ Redis
- ‚úÖ GET /api/mutations/{id}/source - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º—É—Ç–∞—Ü–∏–∏
- ‚úÖ EvolutionForce Event: –Ω–æ–≤—ã–π event type –¥–ª—è —Ä—É—á–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- ‚úÖ Integration: Evolution router –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ FastAPI app
- ‚úÖ Tests: 10 unit-—Ç–µ—Å—Ç–æ–≤ API endpoints —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º
- ‚úÖ OpenAPI: –í—Å–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Swagger UI (/docs)
- üìä Response Models: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Pydantic –º–æ–¥–µ–ª–∏
- üîß Error Handling: 503 –¥–ª—è Redis, 404 –¥–ª—è not found, 500 –¥–ª—è server errors

**–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Phase 4:**
- üìù –ö–æ–¥: 976+ —Å—Ç—Ä–æ–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ (validator + patcher + routes)
- üß™ –¢–µ—Å—Ç—ã: 20 unit-—Ç–µ—Å—Ç–æ–≤ (10 patcher + 10 API)
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ: 100% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: Multi-level validation, rollback, error handling
- üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: HOT_RELOAD_IMPLEMENTATION.md

**–ì–æ—Ç–æ–≤ –∫ Phase 5:** LLM Integration (Ollama, Architect Agent, Coder Agent)

---

## Phase 5: "Genesis" ‚Äî LLM Integration (10 tasks, ~4 hours)

Connect Architect and Coder agents to Ollama. Full autonomous evolution cycle.

### 5.1 Ollama Client

- [x] **T-053** Create `LLMClient` ‚Äî async HTTP wrapper for Ollama API ‚úÖ
  - File: `backend/agents/llm_client.py` ‚úÖ
  - Content: `async def generate(prompt, model, system) -> str | None`, uses httpx.AsyncClient ‚úÖ
  - Error handling: TimeoutException ‚Üí None, ConnectError ‚Üí None + logs error ‚úÖ
  - Verify: call with wrong URL ‚Üí returns None + logs `llm_connection_error` ‚úÖ
  - Depends: T-003, T-007

- [x] **T-054** Add `extract_json()` and `extract_code_block()` parser utilities ‚úÖ
  - File: `backend/agents/llm_client.py` (extend) ‚úÖ
  - Content: regex-based extraction ‚Äî JSON from markdown/plain, code from markdown fences ‚úÖ
  - Also added `generate_json()` method that wraps generate() + extract_json() ‚úÖ
  - Verify: `extract_json('Some text {"key": "val"} more text')` ‚Üí `{"key": "val"}` ‚úÖ
  - Depends: T-053

### 5.2 Architect Agent

- [x] **T-055** Create `ArchitectAgent` ‚Äî subscribe to trigger, call LLM, publish plan ‚úÖ
  - File: `backend/agents/architect.py` ‚úÖ
  - Content: on `ch:evolution:trigger` ‚Üí build system+user prompt ‚Üí call Ollama ‚Üí parse JSON ‚Üí publish EvolutionPlan to `ch:evolution:plan` ‚úÖ
  - Verify: mock Ollama response ‚Üí Architect publishes EvolutionPlan ‚úÖ
  - Depends: T-053, T-054, T-035

- [x] **T-056** Add graceful degradation ‚Äî Architect handles LLM timeout/errors ‚úÖ
  - File: `backend/agents/architect.py` (integrated) ‚úÖ
  - Content: LLM failure ‚Üí `_create_plan()` returns None ‚Üí publishes FeedMessage "‚ùå –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω" ‚úÖ
  - Verify: Ollama URL invalid ‚Üí Architect logs error, publishes failure feed, Core keeps running ‚úÖ
  - Depends: T-055

### 5.3 Coder Agent

- [x] **T-057** Create `CoderAgent` ‚Äî subscribe to plan, generate code, validate, save ‚úÖ
  - File: `backend/agents/coder.py` ‚úÖ
  - Content: on `ch:evolution:plan` ‚Üí build code-gen prompt ‚Üí call Ollama ‚Üí extract code block ‚Üí validate with CodeValidator ‚Üí save to `mutations/` ‚Üí publish MutationReady ‚úÖ
  - Verify: mock Ollama returns valid Trait code ‚Üí file appears in mutations/ ‚Üí MutationReady published ‚úÖ
  - Depends: T-053, T-054, T-043, T-035

- [ ] **T-058** Add retry-on-validation-failure logic to Coder
  - File: `backend/agents/coder.py` (extend)
  - Content: if first code fails validation ‚Üí re-prompt with error message ‚Üí retry once ‚Üí if still fails ‚Üí log + give up
  - Verify: mock Ollama returns `import os` first, then valid code ‚Üí second attempt succeeds
  - Depends: T-057

- [x] **T-059** SHA-256 dedup check before saving mutation file ‚úÖ
  - Implementation: delegated to `CodeValidator.validate()` which checks `evo:mutation:hashes` in Redis (T-046) ‚úÖ
  - Coder calls `await self.validator.validate(code)` ‚Üí duplicate rejected with is_valid=False ‚úÖ
  - Verify: generate same code twice ‚Üí validator returns "duplicate" ‚Üí file not saved ‚úÖ
  - Depends: T-057, T-046

### 5.4 Full Cycle Integration

- [x] **T-060** Wire Architect + Coder + Patcher into `main.py` as coroutines ‚úÖ
  - File: `backend/main.py` ‚úÖ
  - Content: `asyncio.gather(engine, watcher, architect, coder, patcher, event_bus.listen, uvicorn)` ‚úÖ
  - EventBus rewritten: sync Redis PubSub in background thread –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ ‚úÖ
  - Verify: start server ‚Üí all agents start, logs show "starting" for each ‚úÖ
  - Depends: T-055, T-057, T-049

- [ ] **T-061** Create `EvolutionCycle` orchestration ‚Äî track cycle state in Redis
  - File: `backend/agents/base_agent.py` (or new file)
  - Content: create `evolution_cycles` entry on trigger, update on plan/code/apply/fail
  - `evo:cycle:current` key to prevent overlapping cycles
  - Verify: `redis-cli HGETALL evo:cycle:current` shows running cycle, only 1 at a time
  - Depends: T-060

- [ ] **T-062** End-to-end test: let system run 10 minutes with Ollama
  - Action: `docker compose up`, wait 10 minutes, inspect logs and mutations/
  - Verify: at least 1 mutation file in mutations/, at least 1 new Trait in registry, no Core crashes, entity_count stable between MIN and MAX
  - Depends: T-061

**üîÑ Phase 5 ‚Äî LLM Integration (8/10 –∑–∞–≤–µ—Ä—à–µ–Ω–æ, 2026-02-17)**

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ LLMClient: Async HTTP wrapper —Å timeout/error handling (llm_timeout_sec=120s)
- ‚úÖ Parser utils: `extract_json()`, `extract_code_block()`, `generate_json()`
- ‚úÖ ArchitectAgent: 248 —Å—Ç—Ä–æ–∫, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ ch:evolution:trigger, —Å–æ–∑–¥–∞—ë—Ç EvolutionPlan
- ‚úÖ CoderAgent: 304 —Å—Ç—Ä–æ–∫–∏, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ ch:evolution:plan, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–¥
- ‚úÖ Graceful degradation: LLM timeout/error ‚Üí FeedMessage + return (—Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç)
- ‚úÖ Dedup via CodeValidator: –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–æ–¥ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Redis —Ö—ç—à-—Å–µ—Ç
- ‚úÖ Integration: –≤—Å–µ –∞–≥–µ–Ω—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã –≤ main.py —á–µ—Ä–µ–∑ asyncio.gather()
- ‚úÖ EventBus fix: sync Redis PubSub –≤ background thread –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ Tests: `tests/agents/test_agents_mock.py` ‚Äî 7 —Ç–µ—Å—Ç–æ–≤ Architect+Coder —Å –º–æ–∫ LLM
- üß™ E2E Script: `scripts/test_evolution_cycle.py` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- ‚è≥ T-058: retry-on-validation-failure (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, Coder –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None)
- ‚è≥ T-061/T-062: EvolutionCycle orchestration + soak test —Å —Ä–µ–∞–ª—å–Ω—ã–º Ollama

**–°–ª–µ–¥—É—é—â–µ–µ:** T-058 (retry), T-061 (cycle tracking), T-062 (soak test) –∏–ª–∏ Phase 6 (Frontend)

---

## Phase 6: "The Window" ‚Äî Frontend (14 tasks, ~5 hours)

React + PixiJS UI: World Canvas, Evolution Feed, Controls, Entity Inspector.

### 6.1 PixiJS Setup

- [x] **T-063** Install PixiJS and @pixi/react, configure in Vite ‚úÖ
  - File: `frontend/package.json`, `frontend/src/canvas/PixiApp.tsx` ‚úÖ
  - Content: pixi.js ^8, @pixi/react ^8, zustand ^5 installed; PixiApp wraps Application at full size, background #0a0a0f ‚úÖ
  - Verify: blank PixiJS canvas renders at full width/height ‚úÖ
  - Depends: T-030

- [x] **T-064** Create `MolbotSprite` component ‚Äî circle + ears shape ‚úÖ
  - File: `frontend/src/canvas/MolbotSprite.tsx` ‚úÖ
  - Content: PixiJS Graphics ‚Äî body circle (radius 4‚Äì12 px by energy) + 2 ear circles, color from props ‚úÖ
  - Verify: single Molbot renders with correct color and ears visible ‚úÖ
  - Depends: T-063

- [x] **T-065** Create `ResourceDot` component ‚Äî small resource indicators ‚úÖ
  - File: `frontend/src/canvas/ResourceDot.tsx` ‚úÖ
  - Content: small green circles (0x00cc44, radius=4px), alpha scales with energy (0.3‚Äì1.0) ‚úÖ
  - Verify: resources visible on canvas ‚úÖ
  - Depends: T-063

- [x] **T-066** Render all entities from WebSocket stream on PixiJS canvas ‚úÖ
  - File: `frontend/src/canvas/WorldCanvas.tsx` ‚úÖ
  - Content: consumes `useWorldStream`, renders `MolbotSprite` per entity + `ResourceDot` for resources ‚úÖ
  - Verify: open browser ‚Äî see Molbots moving in real-time on canvas ‚úÖ
  - Depends: T-064, T-065, T-031

### 6.2 State Management

- [x] **T-067** Create Zustand store for world state ‚úÖ
  - File: `frontend/src/store/worldStore.ts` ‚úÖ
  - Content: `{entities, entityCount, tick, isConnected, feedMessages, selectedEntityId}` + actions ‚úÖ
  - FeedMessage: `{id, agent, text, timestamp}` ‚Äî typed, readonly ‚úÖ
  - Verify: store updates from WebSocket, components re-render ‚úÖ
  - Depends: T-031

- [x] **T-068** Create `useFeedStream` hook ‚Äî subscribe to feed messages via WebSocket ‚úÖ
  - File: `frontend/src/hooks/useFeedStream.ts` ‚úÖ
  - Content: parse `feed_message` type from WS, append to `feedMessages` array (max 50) ‚úÖ
  - WS endpoint: `ws://localhost:8000/api/ws/feed`, reconnect on disconnect ‚úÖ
  - Backend: FeedConnectionManager + /api/ws/feed endpoint + ch:feed subscription in main.py ‚úÖ
  - Verify: when Watcher detects anomaly, message appears in store ‚úÖ
  - Depends: T-067

### 6.3 UI Components

- [x] **T-069** Create `EvolutionFeed` component ‚Äî scrollable log of AI decisions ‚úÖ
  - File: `frontend/src/components/EvolutionFeed.tsx` ‚úÖ
  - Content: consume feedMessages from store, render as scrollable list with timestamp + agent badge + message ‚úÖ
  - Colors: Watcher=red/orange, Architect=blue, Coder=green, Patcher=purple ‚úÖ
  - Icons: lucide-react (Eye, Brain, Code2, Wand2), auto-scroll, semi-transparent overlay ‚úÖ
  - Depends: T-068

- [x] **T-070** Create `PopulationGraph` component ‚Äî line chart of entity count ‚úÖ
  - File: `frontend/src/components/PopulationGraph.tsx` ‚úÖ
  - Content: track entity_count over last 80 data points, render as SVG sparkline ‚úÖ
  - Store: added `entityCount` field to worldStore, updated by setWorldState ‚úÖ
  - Verify: graph updates in real-time, shows trend line ‚úÖ
  - Depends: T-067

- [ ] **T-071** Create `WorldControls` panel ‚Äî temperature, resources, speed sliders
  - File: `frontend/src/components/WorldControls.tsx`
  - Content: sliders for temperature, resource_spawn_rate, tick_rate. On change ‚Üí send `set_param` via WebSocket or POST /api/world/params
  - Verify: move temperature slider ‚Üí world_params update, entities react
  - Depends: T-025, T-067

- [ ] **T-072** Create `EntityInspector` panel ‚Äî click on Molbot shows details
  - File: `frontend/src/components/EntityInspector.tsx`
  - Content: on click MolbotSprite ‚Üí set selectedEntityId in store ‚Üí panel shows: id, energy bar, age, traits list, DNA hash, parent_id
  - Verify: click Molbot ‚Üí panel appears with correct data
  - Depends: T-066, T-067

- [ ] **T-073** Create "Force Evolution" button wired to `POST /api/evolution/trigger`
  - File: `frontend/src/components/WorldControls.tsx` (extend)
  - Content: button sends POST request, shows spinner while cycle runs
  - Verify: click button ‚Üí see Watcher/Architect/Coder messages in Feed
  - Depends: T-051, T-069

### 6.4 Layout & Polish

- [ ] **T-074** Create main layout: Canvas (left 70%) + Sidebar (right 30%)
  - File: `frontend/src/App.tsx`
  - Content: CSS Grid/Flex layout. Left: WorldCanvas. Right: stacked panels ‚Äî EvolutionFeed, PopulationGraph, WorldControls, EntityInspector
  - Verify: responsive layout, all panels visible without overlap
  - Depends: T-066, T-069, T-070, T-071, T-072

- [ ] **T-075** Add dark theme, header with "AI-Genesis" title and connection status indicator
  - File: `frontend/src/App.tsx` (extend), `frontend/src/index.css`
  - Content: dark background (#0a0a0f), green dot when WS connected, red when disconnected
  - Verify: looks clean, connection indicator reflects actual WebSocket state
  - Depends: T-074

- [ ] **T-076** Create `Dockerfile.web` and add `web` service to docker-compose
  - File: `Dockerfile.web`, `docker-compose.yml` (extend)
  - Content: node:20-alpine, npm install, npm run build, serve with nginx or dev mode
  - Verify: `docker compose up` starts all 4 services, frontend accessible at :5173
  - Depends: T-075, T-006

**üîÑ Phase 6 ‚Äî Frontend (8/14 –∑–∞–≤–µ—Ä—à–µ–Ω–æ, 2026-02-17)**

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ T-063: PixiJS ^8 + @pixi/react ^8 + zustand ^5, PixiApp —Å full-screen canvas
- ‚úÖ T-064: `MolbotSprite` ‚Äî —Ç–µ–ª–æ (circle) + —É—à–∏ (2 –º–∞–ª—ã—Ö circles), radius –æ—Ç energy
- ‚úÖ T-065: `ResourceDot` ‚Äî –∑–µ–ª—ë–Ω—ã–π –∫—Ä—É–∂–æ–∫, alpha –æ—Ç energy
- ‚úÖ T-066: `WorldCanvas` ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏—Ç MolbotSprite –¥–ª—è –∫–∞–∂–¥–æ–π entity –∏–∑ useWorldStream
- ‚úÖ T-067: `worldStore` (Zustand) ‚Äî entities, entityCount, tick, isConnected, feedMessages, selectedEntityId
- ‚úÖ T-068: `useFeedStream` hook ‚Äî WS –∫ `/api/ws/feed`, reconnect, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- ‚úÖ T-069: `EvolutionFeed` ‚Äî –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π —Å —Ü–≤–µ—Ç–∞–º–∏ –ø–æ –∞–≥–µ–Ω—Ç–∞–º + lucide-react –∏–∫–æ–Ω–∫–∏ + auto-scroll
- ‚úÖ T-070: `PopulationGraph` ‚Äî SVG sparkline –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 80 –∑–Ω–∞—á–µ–Ω–∏–π entity_count, bottom-right —É–≥–æ–ª
- ‚úÖ T-078 (–∏–∑ Phase 7): `FeedConnectionManager` + `/api/ws/feed` + –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `ch:feed` –≤ main.py

---

## Phase 7: Final Integration & QA (6 tasks, ~2 hours)

Full system test, logging polish, documentation.

- [ ] **T-077** Add structured logging (structlog) throughout backend
  - File: all backend files
  - Content: replace `print()` with `structlog.get_logger()`, JSON format, include tick/agent/event context
  - Verify: logs are valid JSON, greppable by agent name
  - Depends: T-060

- [x] **T-078** Add WebSocket feed bridge ‚Äî forward `ch:feed` events to all WS clients ‚úÖ
  - File: `backend/api/ws_handler.py` (extend) ‚úÖ
  - Content: FeedConnectionManager subscribes to `ch:feed` via EventBus ‚Üí broadcasts JSON to `/api/ws/feed` clients ‚úÖ
  - Implemented in T-068: FeedConnectionManager + _on_feed_event handler in main.py ‚úÖ
  - Verify: AI agent decisions appear in browser EvolutionFeed component in real-time ‚úÖ
  - Depends: T-035, T-029, T-069

- [ ] **T-079** Add health endpoint `GET /api/health` and Ollama healthcheck
  - File: `backend/api/routes_world.py` (extend)
  - Content: check Redis ping, Ollama /api/tags, return status per service
  - Verify: `curl localhost:8000/api/health` ‚Üí `{redis: "ok", ollama: "ok", core: "running"}`
  - Depends: T-023

- [ ] **T-080** Full system 30-minute soak test
  - Action: `docker compose up`, let run 30 minutes, no human interaction
  - Verify: Core didn't crash (uptime > 99%), >=3 mutations applied, no memory leak (RSS stable), feed messages flowing to UI
  - Depends: T-076, T-078

- [ ] **T-081** Run `mypy --strict` on entire backend, fix all errors
  - Action: `mypy --strict backend/`
  - Verify: 0 errors
  - Depends: T-080

- [ ] **T-082** Write `README.md` with setup instructions
  - File: `README.md`
  - Content: project description, prerequisites (Docker, 16GB RAM), setup steps (`docker compose up`), architecture diagram link, screenshots
  - Verify: fresh clone ‚Üí follow README ‚Üí system starts and works
  - Depends: T-080

---

## Summary

| Phase | Tasks | Est. Time | Cumulative |
|-------|-------|-----------|------------|
| 0 ‚Äî Environment | 10 | 3.5 h | 3.5 h |
| 1 ‚Äî Core Engine | 12 | 4.5 h | 8 h |
| 2 ‚Äî API & WebSocket | 10 | 3.5 h | 11.5 h |
| 3 ‚Äî Event Bus & Watcher | 10 | 3.5 h | 15 h |
| 4 ‚Äî Sandbox & Hot-Reload | 10 | 3.5 h | 18.5 h |
| 5 ‚Äî LLM Integration | 10 | 4 h | 22.5 h |
| 6 ‚Äî Frontend | 14 | 5 h | 27.5 h |
| 7 ‚Äî Final Integration | 6 | 2 h | **29.5 h** |
| **Total** | **82** | **~30 h** | |

---

## Dependency Graph (Critical Path)

```
T-001 ‚îÄ‚îÄ‚ñ∫ T-002 ‚îÄ‚îÄ‚ñ∫ T-005 ‚îÄ‚îÄ‚ñ∫ T-006 ‚îÄ‚îÄ‚ñ∫ T-008
  ‚îÇ         ‚îÇ                     ‚îÇ
  ‚îÇ         ‚ñº                     ‚ñº
  ‚îÇ       T-009 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ T-023 ‚îÄ‚îÄ‚ñ∫ T-024 ‚îÄ‚îÄ‚ñ∫ T-029 ‚îÄ‚îÄ‚ñ∫ T-032
  ‚îÇ                              ‚îÇ
  ‚ñº                              ‚ñº
T-011 ‚îÄ‚îÄ‚ñ∫ T-012 ‚îÄ‚îÄ‚ñ∫ T-014 ‚îÄ‚îÄ‚ñ∫ T-018 ‚îÄ‚îÄ‚ñ∫ T-021 ‚îÄ‚îÄ‚ñ∫ T-037
  ‚îÇ                   ‚îÇ                     ‚îÇ         ‚îÇ
  ‚ñº                   ‚ñº                     ‚ñº         ‚ñº
T-013              T-015               T-033 ‚îÄ‚îÄ‚ñ∫ T-035 ‚îÄ‚îÄ‚ñ∫ T-039 ‚îÄ‚îÄ‚ñ∫ T-041
                                                    ‚îÇ
                                                    ‚ñº
T-043 ‚îÄ‚îÄ‚ñ∫ T-044 ‚îÄ‚îÄ‚ñ∫ T-045 ‚îÄ‚îÄ‚ñ∫ T-047 ‚îÄ‚îÄ‚ñ∫ T-049 ‚îÄ‚îÄ‚ñ∫ T-060 ‚îÄ‚îÄ‚ñ∫ T-062
                                                    ‚îÇ
                                                    ‚ñº
                                   T-053 ‚îÄ‚îÄ‚ñ∫ T-055 ‚îÄ‚îÄ‚ñ∫ T-057
                                                         ‚îÇ
                                                         ‚ñº
                         T-063 ‚îÄ‚îÄ‚ñ∫ T-064 ‚îÄ‚îÄ‚ñ∫ T-066 ‚îÄ‚îÄ‚ñ∫ T-074 ‚îÄ‚îÄ‚ñ∫ T-076 ‚îÄ‚îÄ‚ñ∫ T-080
                                               ‚îÇ
                                               ‚ñº
                                    T-067 ‚îÄ‚îÄ‚ñ∫ T-069 ‚îÄ‚îÄ‚ñ∫ T-078
```

**Critical path:** T-001 ‚Üí T-012 ‚Üí T-018 ‚Üí T-021 ‚Üí T-037 ‚Üí T-039 ‚Üí T-060 ‚Üí T-062 ‚Üí T-080

This path determines minimum calendar time. Frontend (Phase 6) can start in parallel
after T-030 (no backend dependency for scaffold).

---

*Document Version: 1.0*
*References: development_roadmap.md, tech_stack.md, logic_flow.md, PRD.md*
*Next Document: frontend_blueprint.md*
